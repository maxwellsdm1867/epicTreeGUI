---
phase: 01-foundation-legal
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/legacy/
  - docs/*.md
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "Root directory contains only README.md, LICENSE, CITATION.cff, CHANGELOG.md, install.m, .gitignore, and source directories"
    - "old_epochtree/ code is preserved in docs/legacy/ and not on MATLAB path"
    - "new_retinanalysis/ directory is completely removed from repository"
    - "All development markdown files are organized under docs/"
  artifacts:
    - path: "docs/legacy/"
      provides: "Preserved legacy reference code"
    - path: "docs/"
      provides: "All development markdown documentation consolidated"
    - path: ".gitignore"
      provides: "Updated ignore rules for clean repository"
  key_links:
    - from: "docs/legacy/"
      to: "old_epochtree/ (former location)"
      via: "git mv"
      pattern: "old_epochtree"
---

<objective>
Clean the repository root directory from 60+ items down to ~6 files plus source directories, following the locked user decision for repo cleanup strategy.

Purpose: Professional repository appearance and clear project structure are prerequisites for README and installation (Plans 02 and 03).
Output: Clean root directory with all development artifacts organized into proper subdirectories.
</objective>

<execution_context>
@/Users/maxwellsdm/.claude/get-shit-done/workflows/execute-plan.md
@/Users/maxwellsdm/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-legal/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Move legacy code and remove Python pipeline</name>
  <files>docs/legacy/, new_retinanalysis/, old_epochtree/, .gitignore</files>
  <action>
1. Create `docs/legacy/` directory.
2. Move `old_epochtree/` to `docs/legacy/old_epochtree/` using `git mv old_epochtree docs/legacy/old_epochtree`.
3. Remove `new_retinanalysis/` entirely using `git rm -r new_retinanalysis/`. This is per user decision — Python pipeline code is not part of this MATLAB tool.
4. Remove `python_export/` directory if it exists (also Python code, not part of MATLAB tool). Use `git rm -r python_export/` if tracked, or just `rm -rf` if untracked.
5. Remove `test_data/` directory if tracked. It should already be in .gitignore but verify.
6. Update `.gitignore`:
   - Remove the `old_epochtree/` line (it's now tracked under docs/legacy/)
   - Remove the `new_retinanalysis/` line (directory deleted)
   - Add `__pycache__/` and `*.pyc` entries
   - Keep existing MATLAB and macOS ignore patterns
  </action>
  <verify>
- `ls docs/legacy/old_epochtree/` shows legacy Java code files
- `ls new_retinanalysis/` returns "No such file or directory"
- `git status` shows moves and deletions staged correctly
  </verify>
  <done>old_epochtree preserved in docs/legacy, new_retinanalysis fully removed, .gitignore updated</done>
</task>

<task type="auto">
  <name>Task 2: Consolidate root files into docs/ and tests/</name>
  <files>docs/, tests/, root .md and .m files</files>
  <action>
1. Move ALL root markdown files (except README.md which will be rewritten in Plan 03) into `docs/dev/`:
   - Create `docs/dev/` for development/internal documentation
   - `git mv` each of these files to `docs/dev/`:
     BUGFIX_TREE_GUI.md, BUGS_FOUND_PHASE0.md, CELL_TYPE_CLASSIFICATION_GUIDE.md,
     CELL_TYPE_FULL_NAMES_IMPLEMENTED.md, CHANGES_PRE_BUILT_TREE_ONLY.md,
     DATA_FORMAT_SPECIFICATION.md, DESIGN_VERIFICATION.md, EPOCH_FLATTENING.md,
     EPOCH_TREE_SYSTEM_COMPREHENSIVE_GUIDE.md, FIX_BRACE_INDEXING_ERROR.md,
     IMPLEMENTATION_SUMMARY.md, INTEGRATION_INSTRUCTIONS.md,
     JAUIMODEL_FUNCTION_INVENTORY.md, MISSING_TOOLS.md, QUICK_REFERENCE.md,
     QUICK_START.md, README_NEW.md, RENAMING_SOLUTION.md,
     RIEKE_LAB_INFRASTRUCTURE_SPECIFICATION.md, RUN_ME_FIRST.m,
     SPLITTER_STATUS_REPORT.md, SUMMARY.md, TESTING_REPORT.md,
     TEST_RESULTS.md, USAGE_PATTERNS.md, WORKFLOW_GUIDE.md,
     riekesuitworkflow.md
   - Also move the `trd` file (technical reference document) to `docs/dev/trd`

2. Move loose test/debug/verification scripts from root into `tests/`:
   - Move to `tests/debug/` (create directory): debug_epoch_structure.m, debug_splitter_values.m, debug_tree_structure.m, investigate_selection_bug.m
   - Move to `tests/verification/` (create directory): verify_rename.m, verify_task1.m, verify_task2.m, verify_task3.m, benchmark_selection_performance.m, check_paths.m, check_response.m
   - Move to `tests/`: test_cell_type_full_names.m, test_gold_standard_cell_types.m, test_real_cell_types.m, test_updated_gui.m (if not already in tests/)

3. Move loose Python scripts from root: `git rm` or move to `docs/dev/`:
   - add_cell_type_classification.py, export_with_full_names.py

4. Handle remaining root files:
   - Remove `START_HERE.m` (replaced by install.m + quickstart example in Plan 02/03)
   - Remove `fix_now.m` (temporary fix script, no longer needed)
   - Remove `mcp.json` (MCP server config, not part of distributed tool)
   - Keep `epicTreeGUI.m` at root (main GUI class file — needs to stay at root for MATLAB path)
   - Keep `inspect_mat_file.m` — move to `src/utilities/`
   - Keep `launch_epic_tree.m` — move to `examples/`
   - Keep `show_available_splits.m` — move to `src/utilities/`

5. After all moves, the root should contain ONLY:
   - epicTreeGUI.m (main class)
   - src/ (source code)
   - examples/ (user examples)
   - tests/ (test suite)
   - docs/ (documentation)
   - .planning/ (planning artifacts, gitignored or development only)
   - .gitignore
   - .git/
   - .claude/ (if present)
   - (LICENSE, CITATION.cff, CHANGELOG.md, install.m will be created in Plan 02)
  </action>
  <verify>
- `ls *.md` at root returns only README.md (or nothing if README.md was removed/will be rewritten)
- `ls *.m` at root returns only epicTreeGUI.m
- `ls *.py` at root returns no files
- `ls docs/dev/` shows consolidated markdown files
- `ls tests/debug/` shows debug scripts
- `ls tests/verification/` shows verification scripts
- Root directory item count is under 15 (directories + tracked files)
  </verify>
  <done>Root directory cleaned to professional level with all development artifacts organized into proper subdirectories. Only epicTreeGUI.m and directories remain at root.</done>
</task>

</tasks>

<verification>
1. Root directory contains epicTreeGUI.m, src/, examples/, tests/, docs/, .gitignore, and no other loose files
2. `docs/legacy/old_epochtree/` exists with legacy code
3. `docs/dev/` exists with 25+ development markdown files
4. No .py files at root
5. No loose test/debug scripts at root
6. `new_retinanalysis/` does not exist
7. `git status` shows clean staging (all moves tracked)
</verification>

<success_criteria>
Root directory has fewer than 10 items (6 files + 5 directories). All development artifacts are organized. Legacy code is preserved but out of the way. Repository looks professional at first glance.
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-legal/01-01-SUMMARY.md`
</output>
